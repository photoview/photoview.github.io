<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Installation manuelle - Photoview Documentation</title><link rel="stylesheet" href="/main.css"><link rel="stylesheet" href="/docs/style.css"><link href="/docs/syntax-theme.css" rel="stylesheet"><script defer="defer" data-domain="photoview.github.io" src="https://analytics.qpqp.dk/js/plausible.outbound-links.js"></script><script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script></head><body><div class="mx-4 relative"><div class="max-w-screen-2xl m-auto flex items-start min-h-screen"><aside class="w-56 sticky top-0 docs-nav flex-shrink-0"><div class="overflow-y-auto max-h-screen pr-4"><a href="/"><img class="my-8" src="/images/logo-large.svg" alt="Photoview logo" height="60"> </a><input id="nav-search-field" type="search" placeholder="Search" class="pointer mb-4 w-full py-2 px-3 text-sm border border-gray-200 rounded-md"><nav class="mb-8"><ul><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/">Introduction</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/getting-started/">Démarrer</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/faq/">FAQ</a></li><li class=""><span class="ml-3 mt-6 block uppercase text-gray-600 font-bold text-xs tracking-wider">Installation</span><ul><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/installation-docker/">Installation avec Docker</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm bg-blue-50 text-primaryDark hover:text-primaryDark" href="/fr/docs/installation-manual/" aria-current="page">Installation manuelle</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/installation-systemd/">Utilisation avec systemd</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/installation-environment-variables/">Variables d&#39;environnement</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/installation-reverse-proxies/">Reverse Proxy</a></li></ul></li><li class=""><span class="ml-3 mt-6 block uppercase text-gray-600 font-bold text-xs tracking-wider">Utilisation</span><ul><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/usage-basic-overview/">Utilisation basique</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/usage-nextcloud/">Utilisation avec Nextcloud</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/usage-people/">Reconnaissance faciale</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/usage-places/">Lieux</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/usage-scanner/">Analyseur (scanneur) de fichiers</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/usage-settings/">Page des paramètres</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/usage-sharing/">Partage des albums et des médias</a></li></ul></li><li class=""><span class="ml-3 mt-6 block uppercase text-gray-600 font-bold text-xs tracking-wider">Contribuer</span><ul><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/contribute-how-to/">Comment contribuer</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/contribute-feature-request/">Signaler des bugs</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/contribute-setup-locally/">Mettre en place l&#39;environnement de développement</a></li></ul></li></ul></nav></div></aside><style>.docs-nav::before {
        content: '';
        background-color: rgb(249, 250, 251);
        position: absolute;
        z-index: -1;
        top: 0;
        right: 0;
        width: 100vw;
        height: 100vh;
      }</style><aside id="content-toc" class="w-48 sticky docs-toc order-3 flex-shrink-0"><span class="block uppercase text-gray-600 font-bold text-xs tracking-wider pt-0">Contents</span><nav class="toc"><ol><li><a href="#pr%C3%A9paration">Préparation</a></li><li><a href="#t%C3%A9l%C3%A9chargez-et-buildez-photoview">Téléchargez et buildez Photoview</a><ol><li><a href="#buildez-la-partie-front-(la-web-ui)">Buildez la partie front (la Web UI)</a></li><li><a href="#buildez-l'api-back-end">Buildez l'API back-end</a></li><li><a href="#copiez-ui-et-back-end-au-bon-endroit">Copiez UI et back-end au bon endroit</a></li></ol></li><li><a href="#configurez-la-base-de-donn%C3%A9es">Configurez la base de données</a></li><li><a href="#configurez-photoview">Configurez Photoview</a></li><li><a href="#installez-les-d%C3%A9pendances-optionnelles">Installez les dépendances optionnelles</a><ol><li><a href="#support-des-photos-au-format-raw">Support des photos au format RAW</a></li><li><a href="#transcoding-des-vid%C3%A9os">Transcoding des vidéos</a></li><li><a href="#extraction-des-m%C3%A9tadonn%C3%A9es-exif">Extraction des métadonnées Exif</a></li></ol></li><li><a href="#post-installation">Post installation</a></li><li><a href="#mise-%C3%A0-jour">Mise à jour</a></li></ol></nav></aside><main id="primary-content" class="mb-40 w-full px-14 py-14"><header class="flex justify-between items-center"><h1>Installation manuelle</h1><div class="flex items-center"><a title="Edit on GitHub" class="text-gray-500 hover:text-primaryDark no-underline" href="https://github.com/photoview/photoview.github.io/edit/master/./src/fr/docs/installation-manual.md"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg> </a><select class="ml-5" id="lg-switcher" onchange="changeLanguage()"><option class="lg-switcher-item" value="/en/docs/installation-manual/">English</option><option class="lg-switcher-item" selected="selected" value="/fr/docs/installation-manual/">Français</option></select><script>function changeLanguage() {
      document.location.href=document.getElementById("lg-switcher").value;
    }</script></div></header><p>Cette page explique comment builder, installer et configurer Photoview sur une <em>fresh install</em> de <code>Ubuntu 20.04 LTS</code> pour lancer Photoview directement sans utiliser Docker.</p><h2 id="pr%C3%A9paration" tabindex="-1"><a class="header-anchor" href="#pr%C3%A9paration" aria-label="Anchor"></a> Préparation</h2><p>Tout d'abord, commencez par installer les dépendances nécessaires pour faire tourner Photoview.</p><pre class="language-shell"><code class="language-shell"><span class="token comment"># Mise à jour de votre OS</span><br>$ <span class="token function">sudo</span> <span class="token function">apt</span> update<br>$ <span class="token function">sudo</span> <span class="token function">apt</span> upgrade<br><br><span class="token comment"># Installation des outils utilisés dans ce guide</span><br>$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token function">git</span> <span class="token function">curl</span> <span class="token function">wget</span><br><br><span class="token comment"># Installation des répertoires de dépendances nécessaires</span><br>$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> software-properties-common<br>$ <span class="token function">sudo</span> add-apt-repository ppa:strukturag/libheif<br>$ <span class="token function">sudo</span> add-apt-repository ppa:strukturag/libde265<br><br><span class="token comment"># Installation des dépendances nécessaires pour Photoview</span><br>$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libdlib-dev libblas-dev libatlas-base-dev liblapack-dev libjpeg-turbo8-dev build-essential <span class="token punctuation">\</span><br>  libdlib19 libdlib-dev libblas-dev libatlas-base-dev liblapack-dev libjpeg-dev libheif-dev pkg-config gpg zlib1g-dev</code></pre><p>Installez ensuite Golang en suivant les instructions pour Linux depuis leur page <a href="https://golang.org/doc/install">Download and install Go</a>, cela devrait ressembler aux commandes suivantes :</p><pre class="language-shell"><code class="language-shell"><span class="token comment"># Download Go</span><br>$ <span class="token function">wget</span> https://golang.org/dl/go1.16.linux-amd64.tar.gz<br><br><span class="token comment"># Install Go</span><br>$ <span class="token function">sudo</span> <span class="token function">tar</span> -C /usr/local -xzf go1.16.linux-amd64.tar.gz<br>$ <span class="token function">rm</span> go1.16.linux-amd64.tar.gz<br><br><span class="token comment"># Add Go to the path of your user</span><br>$ <span class="token builtin class-name">echo</span> <span class="token string">'export PATH=$PATH:/usr/local/go/bin'</span> <span class="token operator">>></span> <span class="token string">"<span class="token environment constant">$HOME</span>/.bashrc"</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">source</span> <span class="token string">"<span class="token environment constant">$HOME</span>/.bashrc"</span><br><br><span class="token comment"># Verify that go is now installed</span><br>$ go version<br><span class="token comment"># Expected output: go version go1.16 linux/amd64</span></code></pre><p>Maintenant, installez Node 18 et NPM si vous ne les avez pas déjà installés sur votre système.</p><pre class="language-shell"><code class="language-shell">$ <span class="token function">curl</span> -fsSL https://deb.nodesource.com/setup_18.x <span class="token operator">|</span> <span class="token function">sudo</span> -E <span class="token function">bash</span> -<br>$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> nodejs</code></pre><h2 id="t%C3%A9l%C3%A9chargez-et-buildez-photoview" tabindex="-1"><a class="header-anchor" href="#t%C3%A9l%C3%A9chargez-et-buildez-photoview" aria-label="Anchor"></a> Téléchargez et buildez Photoview</h2><p>Rendez-vous sur la page <a href="https://github.com/photoview/photoview/releases">Photoview Releases</a> et téléchargez la dernière version du code source, extrayez le répertoire et ouvrez le dans un Terminal.</p><pre class="language-shell"><code class="language-shell">$ <span class="token builtin class-name">cd</span> /opt<br>$ <span class="token function">git</span> clone https://github.com/photoview/photoview.git<br>$ <span class="token builtin class-name">cd</span> photoview/</code></pre><h3 id="buildez-la-partie-front-(la-web-ui)" tabindex="-1"><a class="header-anchor" href="#buildez-la-partie-front-(la-web-ui)" aria-label="Anchor"></a> Buildez la partie front (la Web UI)</h3><pre class="language-shell"><code class="language-shell">$ <span class="token builtin class-name">cd</span> ui/<br>$ <span class="token function">npm</span> <span class="token function">install</span><br>$ <span class="token function">npm</span> run build</code></pre><p>Cela build le code source de l'UI et l'enregistre dans le répertoire <code>ui/dist/</code>.</p><h3 id="buildez-l'api-back-end" tabindex="-1"><a class="header-anchor" href="#buildez-l'api-back-end" aria-label="Anchor"></a> Buildez l'API back-end</h3><pre class="language-shell"><code class="language-shell">$ <span class="token builtin class-name">cd</span> api/<br>$ go build -v -o photoview <span class="token builtin class-name">.</span></code></pre><p>Cela build l'executable côté serveur et l'enregistre dans <code>api/photoview</code>.</p><h3 id="copiez-ui-et-back-end-au-bon-endroit" tabindex="-1"><a class="header-anchor" href="#copiez-ui-et-back-end-au-bon-endroit" aria-label="Anchor"></a> Copiez UI et back-end au bon endroit</h3><blockquote><p>Si vous choisissez d'utiliser <code>systemd</code>, suivez le <a href="/fr/docs/installation-systemd/">Utilisation avec systemd</a>.</p></blockquote><p>Créez un nouveau répertoire et deplacez les fichiers créés dedans.</p><pre class="language-shell"><code class="language-shell">$ <span class="token builtin class-name">cd</span> /opt/photoview<br>$ <span class="token function">mkdir</span> app<br>$ <span class="token function">cp</span> -r ui/dist/ app/ui/<br>$ <span class="token function">cp</span> api/photoview app/photoview<br>$ <span class="token function">cp</span> -r api/data/ app/data/</code></pre><h2 id="configurez-la-base-de-donn%C3%A9es" tabindex="-1"><a class="header-anchor" href="#configurez-la-base-de-donn%C3%A9es" aria-label="Anchor"></a> Configurez la base de données</h2><blockquote><p>Nous vous recommandons fortement d'utiliser une base de données complète, mais Sqlite est aussi supporté bien qu'il soit bien plus lent en cas d'utilisation avec de grosses bibliothèques de médias. Si vous choisissez d'utiliser Sqlite, vous pouvez sauter cette étape.</p></blockquote><p>Si vous n'avez pas encore installé MySQL sur votre système, vous pouvez le faire en suivant ce guide : <a href="https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-20-04">installing MySQL on Ubuntu 20.04</a>.</p><p>Ensuite, créez une nouvelle base de données et un utilisateur avec les droits d'accès sur cette base.</p><pre class="language-shell"><code class="language-shell">$ <span class="token function">sudo</span> mysql<br><span class="token comment"># Create new user named 'photoview'</span><br>mysql<span class="token operator">></span> CREATE <span class="token environment constant">USER</span> <span class="token string">'photoview'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'Photo_Secret#12345'</span><span class="token punctuation">;</span><br><span class="token comment"># Create new database named 'photoview'</span><br>mysql<span class="token operator">></span> CREATE DATABASE photoview<span class="token punctuation">;</span><br><span class="token comment"># Grant user full access to the newly created database</span><br>mysql<span class="token operator">></span> GRANT ALL PRIVILEGES ON photoview.* TO <span class="token string">'photoview'</span>@<span class="token string">'localhost'</span><span class="token punctuation">;</span></code></pre><p>Cela va créer un nouvel utilisateur <code>photoview</code> avec le mot de passe <code>Photo_Secret#12345</code> et une nouvelle base de données nommée <code>photoview</code>.</p><p>Une fois que c'est fait, vous devriez avoir une base MySQL qui tourne, vide pour le moment, et un nouvel utilisateur identifié par le <code>username</code> et le <code>password</code> choisis à cette étape.</p><h2 id="configurez-photoview" tabindex="-1"><a class="header-anchor" href="#configurez-photoview" aria-label="Anchor"></a> Configurez Photoview</h2><p>Photoview est configuré à l'aide de variables d'environnement globales et/ou depuis les variables définies dans le fichier <code>.env</code> qui est chargé lorsque Photoview est executé.</p><p>Copiez le fichier <code>api/example.env</code> vers le répertoire de destination et nommez le <code>.env</code>.</p><pre class="language-shell"><code class="language-shell">$ <span class="token function">cp</span> api/example.env app/.env</code></pre><p>Pour configurer la base de données MySQL, modifiez la variable <code>PHOTOVIEW_MYSQL_URL</code> pour mettre votre configuration. Remplacez <code>user</code>, <code>password</code> et <code>dbname</code>.</p><pre><code>PHOTOVIEW_DATABASE_DRIVER=mysql
PHOTOVIEW_MYSQL_URL=user:password@tcp(localhost)/dbname

PHOTOVIEW_SERVE_UI=1
PHOTOVIEW_PUBLIC_ENDPOINT=http://localhost:4001/
</code></pre><p>Voir la page <a href="/fr/docs/installation-environment-variables/">Variables d'environnement</a> pour plus de détails.</p><h2 id="installez-les-d%C3%A9pendances-optionnelles" tabindex="-1"><a class="header-anchor" href="#installez-les-d%C3%A9pendances-optionnelles" aria-label="Anchor"></a> Installez les dépendances optionnelles</h2><p>Photoview peut utiliser des programmes tiers pour faire des traitements plus avancés, ces programmes ne sont pas obligatoires pour utiliser Photoview, mais certaines fonctionnalités ne seront disponibles que si ces programmes sont installés.</p><h3 id="support-des-photos-au-format-raw" tabindex="-1"><a class="header-anchor" href="#support-des-photos-au-format-raw" aria-label="Anchor"></a> Support des photos au format RAW</h3><p>Photoview peut utiliser <a href="https://www.darktable.org/">Darktable</a> pour convertir les photos RAW vers le format JPEG lors de l'analyse de la bibliothèque. Pour activer cette fonctionnalité, installez Darktable et assurez-vous que le binaire <code>darktable-cli</code> est bien dans votre <code>$PATH</code>.</p><pre class="language-shell"><code class="language-shell">$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> darktable</code></pre><h3 id="transcoding-des-vid%C3%A9os" tabindex="-1"><a class="header-anchor" href="#transcoding-des-vid%C3%A9os" aria-label="Anchor"></a> Transcoding des vidéos</h3><p>Photoview peut utiliser <code>ffmpeg</code> pour convertir les fichiers vidéos ne pouvant être lus directement par les navigateurs.</p><pre class="language-shell"><code class="language-shell">$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ffmpeg</code></pre><h3 id="extraction-des-m%C3%A9tadonn%C3%A9es-exif" tabindex="-1"><a class="header-anchor" href="#extraction-des-m%C3%A9tadonn%C3%A9es-exif" aria-label="Anchor"></a> Extraction des métadonnées Exif</h3><p>Photoview peut, de manière optionnelle, utiliser <code>exiftool</code> pour parser les métadonnées EXIF plus rapidement et avec plus de fiabilité. Sans <code>exiftool</code>, un parser interne sera utilisé.</p><pre class="language-shell"><code class="language-shell">$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> exiftool</code></pre><h2 id="post-installation" tabindex="-1"><a class="header-anchor" href="#post-installation" aria-label="Anchor"></a> Post installation</h2><p>Si vous êtez arrivé jusqu'ici, vous devriez déjà pouvoir démarrer Photoview. (Sautez cette étape si vous utilisez le fichier <code>systemd</code>.)</p><pre class="language-shell"><code class="language-shell">$ ./photoview</code></pre><p>Une fois démarré, le programme devrait afficher quelque chose comme : (Avec <code>systemd</code>, le message devrait être visible depuis la sortie de la commande <code>systemctl status</code>.)</p><pre><code>Photoview UI public endpoint ready at http://localhost:4001/
</code></pre><p>Vous pouvez alors naviguer sur l'URL <a href="http://localhost:4001/">http://localhost:4001/</a> sur laquelle vous devriez voir l'écran &quot;Initial Setup&quot;. Entrez ici un nouveau <code>username</code> et <code>password</code>. Pour le <code>Photo Path</code>, saisissez le chemin vers le répertoire contenant vos médias, sachant que vous pourrez modifier ce paramètre par la suite depuis la page des Réglages.</p><p>Ensuite cliquez sur <code>Setup Photoview</code> pour créer votre utilisateur administrateur.</p><p>Naviguez ensuite vers la page Réglages et cliquez sur &quot;Analyser&quot;. Le scanner démarre aussitôt le scan de vos répertoires et l'analyse des médias.</p><h2 id="mise-%C3%A0-jour" tabindex="-1"><a class="header-anchor" href="#mise-%C3%A0-jour" aria-label="Anchor"></a> Mise à jour</h2><p>Téléchargement de la dernière version, rebuild, et copie des fichiers générés, comme indiqué plus haut au paragraphe &quot;Téléchargez et buildez Photoview&quot;.</p><p>Si vous n'avez pas modifié la base de données, les répertoires contenant vos médias, ou les répertoires de cache, ça devrait être tout !</p></main></div></div><div id="search-overlay" class="hidden"><div id="search-dimmer" class="fixed top-0 left-0 w-full h-full bg-black opacity-10"></div><div class="fixed top-20 left-1/2 transform -translate-x-1/2 bg-white shadow-lg border border-gray-200 rounded-md p-4 w-40rem overflow-y-auto h-3/4" role="dialog"><input id="search-field" type="search" class="mb-4 w-full py-2 px-3 text-sm border border-gray-200 rounded-md" placeholder="Search" aria-autocomplete="list" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" enterkeyhint="search" aria-controls="search-results-box"><div role="listbox" aria-label="Search" id="search-results-box" class="">Loading results...</div></div></div><script defer="defer" src="/docs/docs-scripts.js"></script></body></html>