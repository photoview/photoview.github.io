<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Manual Setup - Photoview Documentation</title><link rel="stylesheet" href="/main.css"><link rel="stylesheet" href="/docs/style.css"><link href="/docs/syntax-theme.css" rel="stylesheet"><script defer="defer" data-domain="photoview.github.io" src="https://analytics.qpqp.dk/js/plausible.outbound-links.js"></script><script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script></head><body><div class="mx-4 relative"><div class="max-w-screen-2xl m-auto flex items-start min-h-screen"><aside class="w-56 sticky top-0 docs-nav flex-shrink-0"><div class="overflow-y-auto max-h-screen pr-4"><a href="/"><img class="my-8" src="/images/logo-large.svg" alt="Photoview logo" height="60"> </a><input id="nav-search-field" type="search" placeholder="Search" class="pointer mb-4 w-full py-2 px-3 text-sm border border-gray-200 rounded-md"><nav class="mb-8"><ul><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/">Introduction</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/getting-started/">Getting Started</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/faq/">FAQ</a></li><li class=""><span class="ml-3 mt-6 block uppercase text-gray-600 font-bold text-xs tracking-wider">Installation</span><ul><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/installation-docker/">Setup with Docker</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm bg-blue-50 text-primaryDark hover:text-primaryDark" href="/en/docs/installation-manual/" aria-current="page">Manual Setup</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/installation-systemd/">Use with systemd</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/installation-environment-variables/">Environment Variables</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/installation-reverse-proxies/">Reverse Proxy</a></li></ul></li><li class=""><span class="ml-3 mt-6 block uppercase text-gray-600 font-bold text-xs tracking-wider">Usage</span><ul><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/usage-basic-overview/">Basic Overview</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/usage-nextcloud/">Using with Nextcloud</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/usage-people/">Face recognition</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/usage-places/">Places</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/usage-scanner/">File scanner</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/usage-settings/">Settings Page</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/usage-sharing/">Share albums and media</a></li></ul></li><li class=""><span class="ml-3 mt-6 block uppercase text-gray-600 font-bold text-xs tracking-wider">Contributing</span><ul><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/contribute-how-to/">How to contribute</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/contribute-feature-request/">Reporting bugs</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/en/docs/contribute-setup-locally/">Setup Development Environment</a></li></ul></li></ul></nav></div></aside><style>.docs-nav::before {
        content: '';
        background-color: rgb(249, 250, 251);
        position: absolute;
        z-index: -1;
        top: 0;
        right: 0;
        width: 100vw;
        height: 100vh;
      }</style><aside id="content-toc" class="w-48 sticky docs-toc order-3 flex-shrink-0"><span class="block uppercase text-gray-600 font-bold text-xs tracking-wider pt-0">Contents</span><nav class="toc"><ol><li><a href="#preparation">Preparation</a></li><li><a href="#download-and-build-photoview">Download and build Photoview</a><ol><li><a href="#build-the-web-user-interface">Build the Web user-interface</a></li><li><a href="#build-the-api-back-end">Build the API back-end</a></li><li><a href="#copy-needed-files">Copy needed files</a></li></ol></li><li><a href="#set-up-database">Set up database</a></li><li><a href="#configure-photoview">Configure Photoview</a></li><li><a href="#install-optional-dependencies">Install optional dependencies</a><ol><li><a href="#raw-photo-support">RAW photo support</a></li><li><a href="#video-transcoding">Video transcoding</a></li><li><a href="#exif-parsing">Exif parsing</a></li></ol></li><li><a href="#post-installation">Post installation</a></li><li><a href="#updating">Updating</a></li></ol></nav></aside><main id="primary-content" class="mb-40 w-full px-14 py-14"><header class="flex justify-between items-center"><h1>Manual Setup</h1><div class="flex items-center"><a title="Edit on GitHub" class="text-gray-500 hover:text-primaryDark no-underline" href="https://github.com/photoview/photoview.github.io/edit/master/./src/en/docs/installation-manual.md"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg> </a><select class="ml-5" id="lg-switcher" onchange="changeLanguage()"><option class="lg-switcher-item" selected="selected" value="/en/docs/installation-manual/">English</option><option class="lg-switcher-item" value="/fr/docs/installation-manual/">Fran√ßais</option></select><script>function changeLanguage() {
      document.location.href=document.getElementById("lg-switcher").value;
    }</script></div></header><p>This guide explains how to build, install and configure Photoview on a fresh installation of <code>Ubuntu 20.04 LTS</code> to run directly on the system without using Docker.</p><blockquote><p>NOTE: Here is the <a href="https://smyck.net/2023/04/25/how-to-install-photoview-on-freebsd/">blog post</a> with the step-by-step guide to install Photoview on FreeBSD.</p></blockquote><h2 id="preparation" tabindex="-1"><a class="header-anchor" href="#preparation" aria-label="Anchor"></a> Preparation</h2><p>Make sure you got the necessary tools and libraries in order to build and run Photoview.</p><pre class="language-shell"><code class="language-shell"><span class="token comment"># Make sure your computer is up to date</span><br>$ <span class="token function">sudo</span> <span class="token function">apt</span> update<br>$ <span class="token function">sudo</span> <span class="token function">apt</span> upgrade<br><br><span class="token comment"># Install tools used in this guide</span><br>$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token function">git</span> <span class="token function">curl</span> <span class="token function">wget</span><br><br><span class="token comment"># Install necessary repositories</span><br>$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> software-properties-common<br>$ <span class="token function">sudo</span> add-apt-repository ppa:strukturag/libheif<br>$ <span class="token function">sudo</span> add-apt-repository ppa:strukturag/libde265<br><br><span class="token comment"># Install dependencies required to build and run Photoview</span><br>$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libdlib-dev libblas-dev libatlas-base-dev liblapack-dev libjpeg-turbo8-dev build-essential <span class="token punctuation">\</span><br>  libdlib19 libdlib-dev libblas-dev libatlas-base-dev liblapack-dev libjpeg-dev libheif-dev pkg-config gpg zlib1g-dev</code></pre><p>Install Golang by following the instructions for Linux from their <a href="https://golang.org/doc/install">Download and install Go</a> page, the steps should be something like the following.</p><pre class="language-shell"><code class="language-shell"><span class="token comment"># Download Go</span><br>$ <span class="token function">wget</span> https://golang.org/dl/go1.16.linux-amd64.tar.gz<br><br><span class="token comment"># Install Go</span><br>$ <span class="token function">sudo</span> <span class="token function">tar</span> -C /usr/local -xzf go1.16.linux-amd64.tar.gz<br>$ <span class="token function">rm</span> go1.16.linux-amd64.tar.gz<br><br><span class="token comment"># Add Go to the path of your user</span><br>$ <span class="token builtin class-name">echo</span> <span class="token string">'export PATH=$PATH:/usr/local/go/bin'</span> <span class="token operator">>></span> <span class="token string">"<span class="token environment constant">$HOME</span>/.bashrc"</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">source</span> <span class="token string">"<span class="token environment constant">$HOME</span>/.bashrc"</span><br><br><span class="token comment"># Verify that go is now installed</span><br>$ go version<br><span class="token comment"># Expected output: go version go1.16 linux/amd64</span></code></pre><p>Now install Node 18 and NPM if you've not done so already (it installs npm automatically)</p><pre class="language-shell"><code class="language-shell">$ <span class="token function">curl</span> -fsSL https://deb.nodesource.com/setup_18.x <span class="token operator">|</span> <span class="token function">sudo</span> -E <span class="token function">bash</span> -<br>$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> nodejs</code></pre><h2 id="download-and-build-photoview" tabindex="-1"><a class="header-anchor" href="#download-and-build-photoview" aria-label="Anchor"></a> Download and build Photoview</h2><p>Navigate to <a href="https://github.com/photoview/photoview/releases">Photoview Releases</a> and download the source code for the latest version, extract it and open the extracted directory in the terminal.</p><pre class="language-shell"><code class="language-shell">$ <span class="token builtin class-name">cd</span> /opt<br>$ <span class="token function">git</span> clone https://github.com/photoview/photoview.git<br>$ <span class="token builtin class-name">cd</span> photoview/</code></pre><h3 id="build-the-web-user-interface" tabindex="-1"><a class="header-anchor" href="#build-the-web-user-interface" aria-label="Anchor"></a> Build the Web user-interface</h3><pre class="language-shell"><code class="language-shell">$ <span class="token builtin class-name">cd</span> ui/<br>$ <span class="token function">npm</span> <span class="token function">install</span><br>$ <span class="token function">npm</span> run build</code></pre><p>This builds the UI source code and saves it in the <code>ui/dist/</code> directory.</p><h3 id="build-the-api-back-end" tabindex="-1"><a class="header-anchor" href="#build-the-api-back-end" aria-label="Anchor"></a> Build the API back-end</h3><pre class="language-shell"><code class="language-shell">$ <span class="token builtin class-name">cd</span> api/<br>$ go build -v -o photoview <span class="token builtin class-name">.</span></code></pre><p>This builds the server executable to <code>api/photoview</code>.</p><h3 id="copy-needed-files" tabindex="-1"><a class="header-anchor" href="#copy-needed-files" aria-label="Anchor"></a> Copy needed files</h3><blockquote><p>Note: To run Photoview as a <code>systemd</code> service, copy files as outlined in the <a href="/en/docs/installation-systemd/">systemd installation guide</a>. Otherwise, follow the steps here.</p></blockquote><p>Make a new directory and move the needed files to it.</p><pre class="language-shell"><code class="language-shell">$ <span class="token builtin class-name">cd</span> /opt/photoview<br>$ <span class="token function">mkdir</span> app<br>$ <span class="token function">cp</span> -r ui/dist/ app/ui/<br>$ <span class="token function">cp</span> api/photoview app/photoview<br>$ <span class="token function">cp</span> -r api/data/ app/data/</code></pre><h2 id="set-up-database" tabindex="-1"><a class="header-anchor" href="#set-up-database" aria-label="Anchor"></a> Set up database</h2><blockquote><p>It's highly recommended to configure a full database, but Sqlite is also supported though it might be substantially slower on big media libraries. If you decide to use Sqlite, you can skip this step.</p></blockquote><p>If you don't already have a database you can configure one by following this guide on <a href="https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-20-04">installing MySQL on Ubuntu 20.04</a>.</p><p>If you've not done already, configure a new database and user to use with Photoview.</p><pre class="language-shell"><code class="language-shell">$ <span class="token function">sudo</span> mysql<br><span class="token comment"># Create new user named 'photoview'</span><br>mysql<span class="token operator">></span> CREATE <span class="token environment constant">USER</span> <span class="token string">'photoview'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'Photo_Secret#12345'</span><span class="token punctuation">;</span><br><span class="token comment"># Create new database named 'photoview'</span><br>mysql<span class="token operator">></span> CREATE DATABASE photoview<span class="token punctuation">;</span><br><span class="token comment"># Grant user full access to the newly created database</span><br>mysql<span class="token operator">></span> GRANT ALL PRIVILEGES ON photoview.* TO <span class="token string">'photoview'</span>@<span class="token string">'localhost'</span><span class="token punctuation">;</span></code></pre><p>This will create a new user <code>photoview</code> with the password <code>Photo_Secret#12345</code> and a new database named <code>photoview</code>.</p><p>When you're done you should have a running MySQL database with a new user identified by a username and password and an empty database.</p><h2 id="configure-photoview" tabindex="-1"><a class="header-anchor" href="#configure-photoview" aria-label="Anchor"></a> Configure Photoview</h2><p>Photoview is configured through environment variables. It will also load environment variables from a <code>.env</code> file. We will use that to configure Photoview.</p><p>Copy the <code>api/example.env</code> file to the output directory, and name it <code>.env</code>.</p><blockquote><p>Note: If running Photoview as a <code>systemd</code> service, the file containing environment variables is <code>/etc/photoview.env</code> and is created in the steps outlined in the <a href="/en/docs/installation-systemd/">systemd installation guide</a>.</p></blockquote><pre class="language-shell"><code class="language-shell">$ <span class="token function">cp</span> api/example.env app/.env</code></pre><p>To configure the database to use our MySQL database, edit <code>PHOTOVIEW_MYSQL_URL</code> to match our database configuration. Replace <code>user</code>, <code>password</code> and <code>dbname</code>.</p><pre><code>PHOTOVIEW_DATABASE_DRIVER=mysql
PHOTOVIEW_MYSQL_URL=user:password@tcp(localhost)/dbname

PHOTOVIEW_SERVE_UI=1
PHOTOVIEW_PUBLIC_ENDPOINT=http://localhost:4001/
</code></pre><p>See <a href="/en/docs/installation-environment-variables/">environment variables</a> for more details.</p><h2 id="install-optional-dependencies" tabindex="-1"><a class="header-anchor" href="#install-optional-dependencies" aria-label="Anchor"></a> Install optional dependencies</h2><p>Photoview can use some external programs to do more advanced things, these programs are not required to use Photoview but some functionality will only be avaliable with them installed.</p><h3 id="raw-photo-support" tabindex="-1"><a class="header-anchor" href="#raw-photo-support" aria-label="Anchor"></a> RAW photo support</h3><p>Photoview can use <a href="https://www.darktable.org/">Darktable</a> to convert RAW photos to JPEGS when scanning. To enable this install Darktable and make sure the <code>darktable-cli</code> binary is in your <code>$PATH</code> environment variable.</p><pre class="language-shell"><code class="language-shell">$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> darktable</code></pre><h3 id="video-transcoding" tabindex="-1"><a class="header-anchor" href="#video-transcoding" aria-label="Anchor"></a> Video transcoding</h3><p>Photoview can use <code>ffmpeg</code> to convert video files that cannot be played directly in the browser.</p><pre class="language-shell"><code class="language-shell">$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ffmpeg</code></pre><h3 id="exif-parsing" tabindex="-1"><a class="header-anchor" href="#exif-parsing" aria-label="Anchor"></a> Exif parsing</h3><p>Photoview can optionally use <code>exiftool</code> to parse EXIF metadata faster and more reliably. Without it it will use its internal exif parser.</p><pre class="language-shell"><code class="language-shell">$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> exiftool</code></pre><h2 id="post-installation" tabindex="-1"><a class="header-anchor" href="#post-installation" aria-label="Anchor"></a> Post installation</h2><p>If you've made it this far, you should be able to start Photoview. (Skip this step if you are using the <code>systemd</code> unit file.)</p><pre class="language-shell"><code class="language-shell">$ ./photoview</code></pre><p>Once it has started it should print something like the following. (If using the <code>systemd</code> unit, this message should be visible in the output of the <code>systemctl status</code> command.)</p><pre><code>Photoview UI public endpoint ready at http://localhost:4001/
</code></pre><p>Navigate to <a href="http://localhost:4001/">http://localhost:4001/</a> and you should be presented with the &quot;Initial Setup&quot; wizard. From here enter a new username and password. For the <code>Photo Path</code> enter the filepath for your media, you can always change this later from the settings.</p><p>Next click <code>Setup Photoview</code> to create the new admin user.</p><p>Now navigate to the Settings page and click on Scan All. The scanner should now begin to scan for new media.</p><h2 id="updating" tabindex="-1"><a class="header-anchor" href="#updating" aria-label="Anchor"></a> Updating</h2><p>Short version, you will download the latest version, rebuild, and copy the needed files. You can follow the &quot;Download and build Photoview&quot; section above.</p><p>If you've made no changes to the database, photo directories, or cache directories you should be done.</p></main></div></div><div id="search-overlay" class="hidden"><div id="search-dimmer" class="fixed top-0 left-0 w-full h-full bg-black opacity-10"></div><div class="fixed top-20 left-1/2 transform -translate-x-1/2 bg-white shadow-lg border border-gray-200 rounded-md p-4 w-40rem overflow-y-auto h-3/4" role="dialog"><input id="search-field" type="search" class="mb-4 w-full py-2 px-3 text-sm border border-gray-200 rounded-md" placeholder="Search" aria-autocomplete="list" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" enterkeyhint="search" aria-controls="search-results-box"><div role="listbox" aria-label="Search" id="search-results-box" class="">Loading results...</div></div></div><script defer="defer" src="/docs/docs-scripts.js"></script></body></html>